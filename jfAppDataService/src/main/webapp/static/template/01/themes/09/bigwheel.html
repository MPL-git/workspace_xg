<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Genanx</title>
    <link rel="stylesheet" href="../../../../css/style.css">
    <link rel="stylesheet" href="../../css/tmpl.css">
    <link rel="stylesheet" href="css/theme.css">
<style>
    /*bigwheel*/
    .bwbox{background-image: url("images/pic/bigwheel-bg.jpg");}
    .bigwheel{ background-image: url("images/pic/bigwheel.png");}
    .bigwheel-pointer{background-image: url("images/pic/bigwheel-pointer.png");}
</style>
</head>
<body>
<div id="topbar">
    <div class="topbar">
        <div class="layout">
            <div class="toptools"></div>
            <div class="toplinks">
                <p><a href="#"><img src="images/ico-favor.png" alt=""/></a></p>
                <p><a href="#"><img src="images/ico-user.png" alt=""/></a></p>
                <p><a href="#"><img src="images/ico-service.png" alt=""/></a></p>
                <p><a href="#"><img src="images/ico-mobile.png" alt=""/></a></p>
            </div>
            <div class="toplogin">
                <p class="topwelcome">您好！</p>
                <p><a href="login.html" class="loginlink">登录</a></p>
                <p><a href="register.html" class="loginlink">注册</a></p>
            </div>
        </div>
    </div>
</div>
<div id="header">
    <div class="header">
        <div class="layout">
            <h1 id="siteLogo">
                <a href="#"><img src="images/logo.png" alt=""></a>
            </h1>
        </div>
    </div>
</div>
<div id="headerRight" class="layout">
    <div id="headerSearch">
        <form target="_top" action="" name="search">
            <div class="search-panel-fields">
                <label for="q">搜索商城商品!</label>
                <input type="text" name="q" id="q" accesskey="s" autocomplete="off" autofocus="true" x-webkit-speech="" x-webkit-grammar="builtin:translate" lang="zh-CN">
                <button type="submit">搜索</button>
            </div>
        </form>
        <div class="hotsearch">
            <a href="#">初夏T恤</a>
            <a href="#">新款凉鞋</a>
            <a href="#">夏季防晒衫</a>
            <a href="#">开衫</a>
            <a href="#">男T恤</a>
        </div>
    </div>
    <div id="headerCart">
        <div class="cartbtn"><i></i><span>我的购物车</span><b class="cartcount"><em>8</em>件</b></div>
    </div>
</div>

<div id="nav">
    <div class="nav">
        <div class="layout">
            <div class="textNav">
                <p><a href="/" target="_self" title="" _href="/" textvalue="首页">首页</a></p>
                <p><a href="/products/0.html">新品上架</a></p>
                <p><a href="/products/0.html">T恤</a></p>
                <p><a href="/products/0.html">POLO衫</a></p>
                <p><a href="/products/0.html">衬衫</a></p>
                <p><a href="/products/0.html">夹克</a></p>
                <p><a href="/products/0.html">皮衣</a></p>
                <p><a href="/products/0.html">五分裤</a></p>
                <p><a href="/products/0.html">休闲裤</a></p>
                <p><a href="/products/0.html">牛仔裤</a></p>
                <p><a href="/products/0.html">会员中心</a></p>
                <p><a href="/products/0.html">代理加盟</a></p>
            </div>
        </div>
    </div>
</div>

<div class="bwwraper">
    <div class="bwbox">
        <div class="bwwrap">
            <div class="bigwheel"></div>
            <div class="bigwheel-pointer"></div>
            <div class="bwaward">
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
                <p><span class="awtime">13:30:02</span><span class="awprize">格仔T恤+台历</span></p>
            </div>
        </div>
    </div>
    <div class="bwdesc">
        <div class="bwwrap">
<style>
.rulewrap{background: #366a3f; min-height: 200px; margin: 0 -15px;}
.ruletit{ position: absolute; left: 120px; top: 35px;}
.rulelist{margin: 0 34px 0 338px; padding: 45px 0 30px;}
.rulelist dt{ position: relative; color: #fff; font-size: 18px; font-weight: bold; padding: 5px 0; line-height: 38px;}
.rulelist dt em{ position: absolute; left: -60px; width: 46px; height: 38px; font-size: 24px; background: url(images/pic/rule-ico.png) no-repeat; -webkit-background-size: 100% 100%; background-size: 100% 100%; text-indent: 10px; color: #fff; line-height: 38px;}
.rulelist dd{ line-height: 1.5; font-size: 14px; color: #e5e5e5;}
</style>
            <div class="rulewrap">
                <div class="ruletit"><img src="images/pic/rule-title.png" alt=""/></div>
                <div class="rulelist">
                    <dl>
                        <dt><em>1</em>活动时间</dt>
                        <dd>2014.7.1--2014.7.6</dd>
                        <dt><em>2</em>具体玩法</dt>
                        <dd>并且填写了完整真实的个人资料的用户，每天均可得到三次参加幸运大转盘的抽奖机会，限当天使用，点击按钮启动转盘，最终指向的奖品便归您所有，快来试试运气吧!</dd>
                        <dt><em>3</em>奖品使用规则</dt>
                        <dd>所有奖券将在2小时候发送，届时请查收。<br>获得的奖券可在指定店铺使用。<br>每张奖券有效期1周。</dd>
                        <dt><em>4</em>其他注意事项</dt>
                        <dd>请在所获礼券有效期内进行消费和兑换，逾期无效。<br>全部奖品均为礼券形式，中奖后将在5个工作日内将礼券绑定至账户中。</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

</div>

<div id="footer">

</div>
<script src="../../../../js/lib/jquery-1.8.3.min.js"></script>
<script src="../../../../js/jQueryRotate3.js"></script>
<script>
    (function() {
        var lastTime = 0;
        var vendors = ['ms', 'moz', 'webkit', 'o'];
        for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
            window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
            window.cancelRequestAnimationFrame = window[vendors[x]+
                    'CancelRequestAnimationFrame'];
        }

        if (!window.requestAnimationFrame)
            window.requestAnimationFrame = function(callback, element) {
                var currTime = new Date().getTime();
                var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                var id = window.setTimeout(function() { callback(currTime + timeToCall); },
                        timeToCall);
                lastTime = currTime + timeToCall;
                return id;
            };

        if (!window.cancelAnimationFrame)
            window.cancelAnimationFrame = function(id) {
                clearTimeout(id);
            };
    }());

    var BigWheel = {
        _speed:0,
        _cur_angle:0,
        _wheel:null,
        config:{
            acc:0.1,
            dec:0.05,
            maxSpeed:10,
            prizeAngles:[
                [{min:346,max:14}],
                [{min:316,max:344}],
                [{min:286,max:314}],
                [{min:256,max:284}],
                [{min:226,max:254}],
                [{min:196,max:224}],
                [{min:166,max:194}],
                [{min:136,max:164}],
                [{min:106,max:134}],
                [{min:76,max:104}],
                [{min:46,max:74}],
                [{min:16,max:44}]
                /*[
                    {min:16,max:44},
                    {min:76,max:104},
                    {min:136,max:164},
                    {min:196,max:224},
                    {min:256,max:284},
                    {min:316,max:344}
                ],[
                    {min:346,max:14},
                    {min:166,max:194}
                ],[
                    {min:106,max:134},
                    {min:286,max:314}
                ],[
                    {min:46,max:74},
                    {min:226,max:254}
                ]*/
            ]
        },
        init:function(selector,config){
            this._wheel = $(selector);
            $.extend(this.config,config);
        },
        _rotate:function(diffangle){
            var ang = (this._cur_angle + diffangle +360)%360;
            if(ang){
                this._cur_angle = ang;
                this._wheel.rotate(ang);
            }
        },
        _accelerate:function(){
            if(BigWheel._stop){
                return;
            }
            if(!BigWheel._willStop){
                if(BigWheel._speed < BigWheel.config.maxSpeed && BigWheel._speed + BigWheel.config.acc < BigWheel.config.maxSpeed){
                    BigWheel._speed += BigWheel.config.acc;
                }else{
                    BigWheel._speed = BigWheel.config.maxSpeed;
                }
            }
            BigWheel._rotate(BigWheel._speed);
            BigWheel._acctimer = requestAnimationFrame(BigWheel._accelerate);
        },
        _decelerate:function(){
            if(BigWheel._speed <= 0){
                BigWheel._willStop = false;
                BigWheel._stop = false;
                BigWheel._endCallback && BigWheel._endCallback.call();
                return;
            }
            if(BigWheel._speed > 0 && BigWheel._speed - BigWheel.config.dec > 0){
                BigWheel._speed -= BigWheel.config.dec;
            }else{
                BigWheel._speed = 0;
            }
            BigWheel._rotate(BigWheel._speed);
            BigWheel._dectimer = requestAnimationFrame(BigWheel._decelerate);
        },
        _checkAngle:function(){
            var angle = BigWheel._targetAngle;
            var diffangle = (BigWheel._cur_angle + BigWheel._speed)%360 - angle;
            if(diffangle >= 0 ){
                BigWheel._stop = true;
                BigWheel._rotate(BigWheel._speed - diffangle);
                BigWheel._dectimer = requestAnimationFrame(BigWheel._decelerate);
            }else{
                BigWheel._checktimer = requestAnimationFrame(BigWheel._checkAngle);
            }
        },
        startRotate:function(){
            if(this._speed > 0){
                return;
            }
            if(this._speed == 0){
                this._acctimer = requestAnimationFrame(this._accelerate);
            }
        },
        endRotate:function(prize,callback){
            var count = Math.ceil(this._speed/this.config.dec),buffer_angle = 0 ,ang,angles,prizeAngles = this.config.prizeAngles;
            for(var i = 0,spd = this._speed; i < count; i++){
                spd -= this.config.dec;
                buffer_angle += spd;
            }
            this._willStop = true;
            this._endCallback = callback;
            angles = prizeAngles[parseInt(prize)] || prizeAngles[0];
            angles = angles[Math.floor(Math.random()*angles.length)];
            ang = ((angles.max - angles.min + 360)%360*Math.random() + angles.min - buffer_angle + 360)%360;
            this._targetAngle = ang;
            this._checktimer = requestAnimationFrame(BigWheel._checkAngle);
        }
    }

    $(function(){
        BigWheel.init(".bigwheel");
        $(".bigwheel-pointer").on("click",function(){
            BigWheel.startRotate();
            setTimeout(function(){
                BigWheel.endRotate(1,function(){
                    alert("谢谢参与");
                });
            },4000);
        });
    });
</script>
</body>
</html>